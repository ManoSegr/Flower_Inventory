
@model FlowerShop.Domain.Category
@{
    ViewData["Title"] = "Delete Category";
    var flowerCount = Model.Flowers?.Count ?? 0;
}

<h1>Delete Category</h1>

<div class="alert alert-warning">
    <h4 class="alert-heading">
        <i class="fas fa-exclamation-triangle"></i>
        Are you sure you want to delete this category?
    </h4>
    <p class="mb-0">This action cannot be undone.</p>
</div>

<div class="card">
    <div class="card-header">
        <h5 class="mb-0">Category: @Model.Name</h5>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Name:</dt>
            <dd class="col-sm-9">@Model.Name</dd>

            <dt class="col-sm-3">Description:</dt>
            <dd class="col-sm-9">
                @if (!string.IsNullOrEmpty(Model.Description))
                {
                    @Model.Description
                }
                else
                {
                    <em class="text-muted">No description</em>
                }
            </dd>

            <dt class="col-sm-3">Created:</dt>
            <dd class="col-sm-9">@Model.CreatedAt.ToString("MMMM dd, yyyy")</dd>

            <dt class="col-sm-3">Flowers:</dt>
            <dd class="col-sm-9">
                <span class="badge bg-@(flowerCount > 0 ? "warning" : "secondary")">
                    @flowerCount flower@(flowerCount != 1 ? "s" : "")
                </span>
            </dd>
        </dl>

        @if (flowerCount > 0)
        {
            <div class="alert alert-danger mt-3">
                <strong>Warning:</strong> This category contains @flowerCount flower@(flowerCount != 1 ? "s" : ""). 
                You must delete or reassign these flowers before deleting the category.
            </div>
        }
    </div>
</div>

<form asp-action="Delete" method="post" class="mt-3">
    <input type="hidden" asp-for="CategoryId" />
    <button type="submit" class="btn btn-danger" @(flowerCount > 0 ? "disabled" : "")>
        <i class="fas fa-trash"></i> Delete Category
    </button>
    <a asp-action="Details" asp-route-id="@Model.CategoryId" class="btn btn-secondary">Cancel</a>
</form>